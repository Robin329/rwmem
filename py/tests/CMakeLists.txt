file(GLOB PY_SRCS "*.py")
add_custom_target(pyextras SOURCES ${PY_SRCS})

add_test(NAME test-mmap COMMAND "${CMAKE_CURRENT_SOURCE_DIR}/test-mmap.py" WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/../..)
add_test(NAME test-mmap-regs COMMAND "${CMAKE_CURRENT_SOURCE_DIR}/test-mmap-regs.py" WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/../..)
add_test(NAME test-regfile COMMAND "${CMAKE_CURRENT_SOURCE_DIR}/test-regfile.py" WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/../..)

set_property(TEST test-mmap PROPERTY ENVIRONMENT "PYTHONPATH=${CMAKE_CURRENT_BINARY_DIR}/..")
set_property(TEST test-mmap-regs PROPERTY ENVIRONMENT "PYTHONPATH=${CMAKE_CURRENT_BINARY_DIR}/..")
set_property(TEST test-regfile PROPERTY ENVIRONMENT "PYTHONPATH=${CMAKE_CURRENT_BINARY_DIR}/..")
